<!doctype html>
<html lang="pt-br">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PsiquÃª Patinhas â€” Consultoria Comportamental</title>
<meta name="description" content="PsiquÃª Patinhas â€” Consultoria comportamental com ciÃªncia & carinho. Atendimento via WhatsApp. R$ 5,99 por consulta exclusiva.">
<meta property="og:title" content="PsiquÃª Patinhas â€” Consultoria Comportamental">
<meta property="og:description" content="Consultoria comportamental com ciÃªncia & carinho. R$ 5,99 por consulta exclusiva.">
<meta property="og:type" content="website">

<!-- Favicon e Fontes -->
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ctext x='8' y='48' font-size='40'%3E%F0%9F%90%B6%3C/text%3E%3C/svg%3E">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Cormorant+Garamond:wght@600;700&display=swap" rel="stylesheet">

<!-- ==== BIBLIOTECAS PESADAS (CDN) ==== -->
<!-- GSAP + plugins -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollToPlugin.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/MotionPathPlugin.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Flip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/CustomEase.min.js"></script>

<!-- Smooth scroll -->
<script src="https://unpkg.com/lenis@1.0.45/dist/lenis.min.js"></script>

<!-- Split text -->
<script src="https://unpkg.com/split-type@0.3.3/umd/index.min.js"></script>

<!-- Three.js core -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>

<!-- PixiJS + filters -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.4.0/pixi.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/pixi-filters@5.2.1/dist/pixi-filters.js"></script>

<!-- tsParticles (camada extra) -->
<script src="https://cdn.jsdelivr.net/npm/tsparticles@3.3.0/tsparticles.bundle.min.js"></script>

<!-- Lottie (Bodymovin) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.12.2/lottie.min.js"></script>

<!-- Anime.js + mo.js (microinteraÃ§Ãµes) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.2/anime.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mo-js/0.288.2/mo.min.js"></script>

<!-- Ãcone animado (lordicon) -->
<script src="https://cdn.lordicon.com/ritcuqlt.js"></script>

<!-- imagesLoaded -->
<script src="https://unpkg.com/imagesloaded@5/imagesloaded.pkgd.min.js"></script>

<style>
/* ========================= Design System (IDENTIDADE PRESERVADA) ========================= */
:root{
  --bg:#0e0e0e; --panel:#151515; --text:#ececec; --muted:#b8b8b8;
  --gold:#d6c279; --gold-2:#bcae6a; --shadow:0 12px 36px rgba(214,194,121,.20);
  --radius:16px; --ease:cubic-bezier(.25,.8,.25,1);
  --belt:26px;
}
*,*:before,*:after{box-sizing:border-box}
html{scroll-behavior:smooth}
body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;line-height:1.7;overflow-x:hidden}
img{display:block;max-width:100%}
a{color:inherit;text-decoration:none}
.wrap{max-width:1144px;margin:0 auto;padding:0 20px}

/* ========================= Progress (topo) + CTA radial ========================= */
.progress{position:fixed;top:0;left:0;height:3px;width:0;background:linear-gradient(90deg,var(--gold),#ffffff55);z-index:9000;transform-origin:left}
.radial{--p:0deg; position:relative}
.radial::after{
  content:""; position:absolute; inset:-6px; border-radius:999px;
  background:conic-gradient(var(--gold) var(--p), #ffffff22 0);
  -webkit-mask: radial-gradient(circle, transparent 0 66%, #000 67% 100%);
          mask: radial-gradient(circle, transparent 0 66%, #000 67% 100%);
  transition:--p .2s linear;
}

/* ========================= Emoji belt ========================= */
.emoji-belt{position:fixed;top:0;left:0;right:0;height:var(--belt);z-index:8900;background:linear-gradient(180deg,#0f0f0f,rgba(15,15,15,.7));border-bottom:1px solid #ffffff12;pointer-events:none;overflow:hidden;mask-image:linear-gradient(90deg,transparent,#000 12%,#000 88%,transparent)}
.emoji-track{white-space:nowrap;display:inline-block;opacity:.55;font-size:16px;line-height:var(--belt);animation:marquee 38s linear infinite}
@keyframes marquee{to{transform:translateX(-50%)}}
@media (prefers-reduced-motion:reduce){.emoji-track{animation:none}}

/* ========================= Cursor ========================= */
.cursor{position:fixed;left:0;top:0;width:14px;height:14px;border:2px solid rgba(214,194,121,.85);border-radius:50%;pointer-events:none;z-index:9500;transform:translate(-50%,-50%);mix-blend-mode:exclusion;opacity:.9;transition:transform .15s var(--ease),width .25s var(--ease),height .25s var(--ease),opacity .25s var(--ease)}
.cursor.big{width:34px;height:34px}

/* ========================= Navbar (MESMA ESTRUTURA) ========================= */
.nav{position:sticky;top:var(--belt);z-index:8800;background:rgba(18,18,18,.55);backdrop-filter:blur(8px) saturate(140%);border-bottom:1px solid #ffffff22}
.nav-inner{height:64px;display:flex;align-items:center;justify-content:space-between}
.brand{display:flex;align-items:center;gap:12px}
.brand img{width:40px;height:40px;object-fit:contain;filter:drop-shadow(0 6px 20px rgba(214,194,121,.25))}
.logo{font-family:"Cormorant Garamond",serif;font-weight:700;letter-spacing:.3px;color:var(--gold)}
.nav-links{display:flex;align-items:center;gap:10px}
.nav-link{padding:10px 12px;border-radius:10px;position:relative}
.nav-link.underline::after{content:"";position:absolute;left:12px;right:calc(100% - 12px);bottom:6px;height:2px;background:linear-gradient(90deg,var(--gold),var(--gold-2));border-radius:2px;transition:all .35s var(--ease);opacity:.9}
.nav-link:hover.underline::after,.nav-link.active.underline::after{right:12px}

/* ========================= BotÃµes ========================= */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:14px 18px;border-radius:999px;border:1px solid #ffffff24;font-weight:700;cursor:pointer;position:relative;overflow:hidden;transition:transform .18s var(--ease),box-shadow .28s var(--ease),background .28s var(--ease),filter .28s var(--ease)}
.btn:focus-visible{outline:2px solid var(--gold);outline-offset:2px}
.cta-primary{background:linear-gradient(135deg,var(--gold),#e8dca8);color:#161616;box-shadow:0 18px 48px rgba(214,194,121,.48)}
.cta-primary:hover{box-shadow:0 26px 70px rgba(214,194,121,.58)}
.cta-secondary{background:rgba(255,255,255,.06);color:var(--text)}
.btn:hover{transform:translateY(-2px)}
.btn:active{transform:translateY(0) scale(.98)}
.btn .r{position:absolute;border-radius:50%;transform:scale(0);background:rgba(255,255,255,.35);animation:ripple .6s linear}
@keyframes ripple{to{transform:scale(8);opacity:0}}
.magnetic{will-change:transform}
.btn::before{content:"";position:absolute;inset:-2px;border-radius:999px;background:radial-gradient(300px 120px at var(--mx,50%) var(--my,50%),rgba(214,194,121,.22),transparent 64%);opacity:0;transition:opacity .25s var(--ease)}
.btn:hover::before{opacity:1}

/* ========================= Hero (camadas + 3D) ========================= */
header.hero{position:relative;min-height:100vh;display:grid;place-items:center;overflow:hidden}
.hero-overlay{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(14,14,14,.88) 0%,rgba(14,14,14,.72) 55%,rgba(14,14,14,.66) 100%);z-index:2}
#bg3d{position:absolute;inset:0;z-index:1;pointer-events:none}
#tpaw{position:absolute;inset:0;z-index:2;pointer-events:none}
.hero-media{position:absolute;inset:0;z-index:0;will-change:transform}
.hero-media img{width:100%;height:100%;object-fit:cover;object-position:center;filter:grayscale(.12) brightness(.78) contrast(1.05)}
.hero-layer{position:absolute;inset:auto;z-index:3;opacity:.35;filter:drop-shadow(0 8px 28px rgba(214,194,121,.22))}
.layer-paw{right:3vw;bottom:8vh;width:min(20vw,220px)}
.layer-ring{left:4vw;top:12vh;width:min(16vw,180px);animation:spinRing 12s linear infinite, pulseRing 4.6s ease-in-out infinite}
@keyframes spinRing{to{transform:rotate(360deg)}}
@keyframes pulseRing{0%,100%{filter:drop-shadow(0 8px 28px rgba(214,194,121,.22))}50%{filter:drop-shadow(0 16px 54px rgba(214,194,121,.45))}}
.hero-inner{position:relative;z-index:4;text-align:center;padding:96px 20px}
.title{font-family:"Cormorant Garamond",serif;font-weight:700;line-height:1.04;font-size:clamp(40px,8vw,84px);color:var(--gold);text-shadow:0 2px 12px rgba(214,194,121,.18);margin:0 0 8px}
.subtitle{font-size:clamp(16px,2.2vw,24px);opacity:.96;margin:0 auto 12px;max-width:900px}

/* CHIP com GLOW ORBITAL */
.price-chip{display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border-radius:999px;border:1px solid #ffffff22;background:rgba(255,255,255,.06);color:var(--gold);margin-top:8px;position:relative;overflow:hidden;box-shadow:0 0 0 0 rgba(214,194,121,.0)}
.price-chip::before{
  content:"";position:absolute;inset:-6px;border-radius:inherit;
  background:conic-gradient(from 0deg, rgba(214,194,121,.0) 0deg, rgba(214,194,121,.55) 90deg, rgba(214,194,121,.0) 180deg, rgba(214,194,121,.55) 270deg, rgba(214,194,121,.0) 360deg);
  -webkit-mask: radial-gradient(circle, transparent 0 64%, #000 65% 100%); mask: radial-gradient(circle, transparent 0 64%, #000 65% 100%);
  animation:orbitGlow 3.6s linear infinite;
  filter:blur(1px);
}
@keyframes orbitGlow{to{transform:rotate(360deg)}}
.price-chip.shimmer::after{content:"";position:absolute;inset:0;background:linear-gradient(110deg,transparent 0%,rgba(255,255,255,.18) 20%,transparent 40%);transform:translateX(-120%);animation:shine 3s ease forwards}
@keyframes shine{to{transform:translateX(120%)}}
.price-chip{animation:chipPulse 4.2s ease-in-out infinite}
@keyframes chipPulse{0%,100%{box-shadow:0 0 0 0 rgba(214,194,121,.0)}50%{box-shadow:0 0 42px 4px rgba(214,194,121,.25)}}

.cta-row{margin-top:22px;display:flex;flex-wrap:wrap;gap:12px;justify-content:center}
.lottie-corner{position:absolute;right:22px;bottom:22px;z-index:5;opacity:.95}

/* Separadores suaves entre seÃ§Ãµes */
.divider{display:block;width:100%;height:60px}
.divider svg{width:100%;height:100%;display:block}

/* ========================= SeÃ§Ãµes (MESMA ESTRUTURA) ========================= */
.section{padding:100px 0;background:var(--bg);position:relative}
.section.alt{background:#121212}
.h2{font-family:"Cormorant Garamond",serif;font-weight:700;font-size:clamp(28px,4.5vw,44px);color:var(--gold);margin:0 0 16px;text-align:center}
.lead{text-align:center;color:var(--muted);max-width:900px;margin:0 auto 8px}

/* A Consulta */
.steps-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-top:26px}
@media (max-width:920px){.steps-grid{grid-template-columns:1fr}}
.step{background:transparent;border:1px solid #ffffff22;border-radius:var(--radius);padding:20px;position:relative;overflow:hidden;box-shadow:var(--shadow);transition:transform .25s var(--ease),box-shadow .25s var(--ease),border-color .25s var(--ease)}
.step:hover{transform:scale(1.02);box-shadow:0 18px 44px rgba(0,0,0,.35)}
.step:hover::after{content:"";position:absolute;inset:0;border-radius:inherit;border:1px solid transparent;background:linear-gradient(180deg,rgba(214,194,121,.65),rgba(214,194,121,.15)) border-box;-webkit-mask:linear-gradient(#000 0 0) padding-box,linear-gradient(#000 0 0);-webkit-mask-composite:xor;mask-composite:exclude}
.ord{display:inline-flex;align-items:center;gap:8px;font-family:"Cormorant Garamond",serif;color:var(--gold);font-weight:700}
.step-title{margin:.3rem 0 .4rem 0;font-weight:700}
.step-text{color:#d6d7db;margin:0}

/* Filosofia */
#filosofia .wrap{position:relative}
.philo{border:1px solid #ffffff24;border-radius:var(--radius);padding:24px;background:rgba(255,255,255,.02);max-width:920px;margin:0 auto}
.philo p{margin:0;color:#dcdcdc}

/* CÃ£o orbitando a Filosofia */
.dog-orbit{position:absolute; pointer-events:none; z-index:0; animation:orbitSpin 12s linear infinite}
.dog-orbit img{position:absolute; left:50%; top:0; transform:translate(-50%,-50%) rotate(0deg); width:58px; filter:drop-shadow(0 6px 16px rgba(214,194,121,.45)); animation:dogBob .8s ease-in-out infinite alternate}
@keyframes orbitSpin{to{transform:rotate(360deg)}}
@keyframes dogBob{to{transform:translate(-50%,-56%) rotate(0.01deg)}}

/* Metodologia + linha curva */
.method{position:relative;margin-top:30px}
.method svg.wave{position:absolute;left:0;right:0;bottom:-14px;height:200px;pointer-events:none;opacity:.9}
.method .wave path{stroke:var(--gold);stroke-width:18;fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:1;stroke-dashoffset:1;transition:stroke-dashoffset 1.8s var(--ease)}
.method.draw .wave path{stroke-dashoffset:0}
.method .row{display:grid;grid-template-columns:repeat(5,1fr);gap:22px}
@media (max-width:1100px){.method .row{grid-template-columns:repeat(3,1fr)}}
@media (max-width:720px){.method .row{grid-template-columns:1fr}}
.m-item{display:flex;gap:12px;align-items:flex-start}
.m-ico{flex:none;width:42px;height:42px;border-radius:12px;background:rgba(214,194,121,.12);display:grid;place-items:center;color:var(--gold);box-shadow:0 8px 22px rgba(214,194,121,.15);transition:transform .25s var(--ease),filter .25s var(--ease)}
.m-item:hover .m-ico{transform:rotate(-4deg) translateY(-2px);filter:drop-shadow(0 8px 22px rgba(214,194,121,.35))}
.m-item strong{display:block;margin-bottom:4px}

/* Timeline Horizontal pinada */
.hwrap{margin-top:42px;position:relative}
.hpin{position:relative;overflow:hidden;border:1px solid #ffffff22;border-radius:var(--radius);background:linear-gradient(180deg,#151515,#121212)}
.htrack{display:flex;gap:24px;padding:28px;min-width:max-content}
.hstep{min-width:320px;border:1px solid #ffffff22;border-radius:14px;padding:16px;background:rgba(255,255,255,.02);box-shadow:0 10px 30px rgba(0,0,0,.25);transition:transform .25s var(--ease)}
.hstep:hover{transform:translateY(-4px)}
.hstep .hs-ico{display:inline-grid;place-items:center;width:36px;height:36px;border-radius:10px;background:rgba(214,194,121,.12);margin-bottom:6px}
.hline{position:absolute;left:0;right:0;top:50%;height:2px;background:linear-gradient(90deg,var(--gold),var(--gold-2));opacity:.45;transform:translateY(-50%);pointer-events:none}

/* Mini-Ã­cones */
.icons{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:22px}
@media (max-width:900px){.icons{grid-template-columns:1fr}}
.icon-card{display:flex;gap:12px;align-items:center;border:1px solid #ffffff24;border-radius:var(--radius);padding:14px;background:rgba(255,255,255,.02);transition:transform .22s var(--ease)}
.icon-card:hover{transform:translateY(-3px)}
.icon-card svg{width:28px;height:28px;flex:none;filter:drop-shadow(0 4px 12px rgba(214,194,121,.18))}

/* ===== FAQ / PreÃ§o (AJUSTES CRÃTICOS) ===== */
.faq{max-width:920px;margin:0 auto}
.faq-item{border-top:1px solid #ffffff22;padding:16px 0;position:relative}
.faq-q{font-weight:700;display:flex;justify-content:space-between;align-items:center;gap:8px;cursor:pointer;user-select:none}
.faq-q .plus{display:inline-block;transition:transform .35s var(--ease)}
/* -> CRÃTICO: sem max-height; usamos height com GSAP */
.faq-a{
  color:#d6d7db; height:0; overflow:hidden; opacity:0;
  filter:blur(6px);
  clip-path: inset(0 0 100% 0); /* fecha â€œjanelaâ€ vertical */
  will-change: height, opacity, filter, clip-path, transform;
}
.faq-item.open .faq-q .plus{transform:rotate(45deg)} /* vira â€œâ€“â€ */

/* Tabela de preÃ§o com "janela" cinematogrÃ¡fica na entrada */
.table{
  width:100%; border-collapse:separate; border-spacing:0; overflow:hidden; border-radius:var(--radius); border:1px solid #ffffff22;
  /* estado inicial para animaÃ§Ã£o de â€œjanelaâ€ */
  opacity:0; transform:translateY(24px) scale(.98);
  clip-path: inset(0 0 14% 0 round var(--radius));
  box-shadow: 0 0 0 rgba(214,194,121,0);
}
.table th,.table td{padding:14px 16px;text-align:left}
.table thead th{background:#151515;color:#dcdcdc}
.table tbody tr:nth-child(even){background:#131313}
.table.enter{ /* estado final + brilho */ 
  box-shadow:0 28px 120px rgba(214,194,121,.18);
}
.table::after{ /* sweep highlight */
  content:""; position:absolute; inset:0; pointer-events:none;
  background:linear-gradient(110deg,transparent 0%,rgba(255,255,255,.14) 20%,transparent 40%);
  transform:translateX(-120%); opacity:0;
}
.table.enter::after{ animation:shine 1.2s ease .4s forwards; opacity:1; }
.note{color:#bfc1c8;font-size:.95rem;margin-top:10px;text-align:center; opacity:0; transform:translateY(14px)}

/* CTA faixa */
.cta-band{margin-top:28px;border:1px solid #ffffff22;border-radius:var(--radius);padding:20px;background:linear-gradient(180deg,#121212,#0f0f0f)}
.cta-band .row{display:flex;gap:16px;align-items:center;justify-content:space-between;flex-wrap:wrap}
.cta-band h3{margin:0;font-family:"Cormorant Garamond",serif}

/* Footer */
footer{border-top:1px solid #ffffff22;background:#0b0b0b}
.foot{display:grid;grid-template-columns:2fr 1fr 1fr;gap:16px;padding:24px}
@media (max-width:900px){.foot{grid-template-columns:1fr}}
.foot h4{font-family:"Cormorant Garamond",serif;font-size:20px;color:var(--gold);margin:0 0 8px}
.foot small{color:#c9cbd2}
.foot-bottom{text-align:center;border-top:1px solid #ffffff22;padding:16px}

/* Reveals (GSAP vai sobrescrever) */
.reveal{opacity:0;transform:translateY(22px)}

/* Paw Trail canvas */
#pawTrail{position:fixed;inset:0;pointer-events:none;z-index:9400;opacity:.85}

/* ReduÃ§Ã£o de movimento */
@media (prefers-reduced-motion:reduce){
  .emoji-track{animation:none}
  .cursor{display:none}
}
</style>
</head>
<body>

<!-- Progress -->
<div class="progress" id="progress"></div>

<!-- Paw trail (micro partÃ­culas 2D no cursor) -->
<canvas id="pawTrail"></canvas>

<!-- Emoji belt -->
<div class="emoji-belt" aria-hidden="true">
  <div class="emoji-track">
    &nbsp;ğŸ• ğŸ¾ ğŸ¦´ ğŸŒ¿ &nbsp;ğŸ• ğŸ¾ ğŸ¦´ ğŸŒ¿ &nbsp;ğŸ• ğŸ¾ ğŸ¦´ ğŸŒ¿ &nbsp;ğŸ• ğŸ¾ ğŸ¦´ ğŸŒ¿ &nbsp;ğŸ• ğŸ¾ ğŸ¦´ ğŸŒ¿ &nbsp;ğŸ• ğŸ¾ ğŸ¦´ ğŸŒ¿
  </div>
</div>

<!-- Navbar (MESMA) -->
<nav class="nav" aria-label="NavegaÃ§Ã£o principal">
  <div class="wrap nav-inner">
    <div class="brand">
      <!-- LOGO VISÃVEL -->
      <img src="assets/logo/psique-patinhas.png" alt="Logo PsiquÃª Patinhas" onerror="this.style.display='none'">
      <div class="logo">PsiquÃª Patinhas</div>
    </div>
    <div class="nav-links">
      <a class="nav-link underline" href="#inicio">InÃ­cio</a>
      <a class="nav-link underline" href="#consulta">Como Funciona</a>
      <a class="nav-link underline" href="#filosofia">Nossa Filosofia</a>
      <a class="nav-link underline" href="#metodologia">Metodologia</a>
      <a class="nav-link underline" href="#faq">FAQ</a>
      <a class="nav-link underline" href="#preco">PreÃ§o</a>
      <a class="btn cta-primary nav-link magnetic radial"
         id="whats-cta"
         href="https://wa.me/5514996649899?text=Ol%C3%A1!%20Gostaria%20de%20iniciar%20a%20consulta%20comportamental%20da%20Psiqu%C3%AA%20Patinhas."
         target="_blank" aria-label="Iniciar consulta pelo WhatsApp">WhatsApp</a>
    </div>
  </div>
</nav>

<!-- Hero (camadas + 3D) -->
<header id="inicio" class="hero">
  <canvas id="bg3d"></canvas>
  <div id="tpaw"></div>
  <div class="hero-media" aria-hidden="true">
    <img src="https://images.unsplash.com/photo-1561037404-61cd46aa615b?q=80&w=2000&auto=format&fit=crop" alt="CÃ£o em close, fundo escuro" />
  </div>
  <div class="hero-overlay" aria-hidden="true"></div>

  <!-- camadas decorativas (parallax) -->
  <img class="hero-layer layer-paw" src="assets/logo/psique-patinhas.png" alt="" onerror="this.style.display='none'">
  <svg class="hero-layer layer-ring" viewBox="0 0 120 120" fill="none" aria-hidden="true">
    <circle cx="60" cy="60" r="52" stroke="url(#gg)" stroke-width="3" opacity=".95"/>
    <defs><linearGradient id="gg" x1="0" y1="0" x2="120" y2="120"><stop stop-color="#d6c279"/><stop offset="1" stop-color="#bcae6a"/></linearGradient></defs>
  </svg>

  <div class="hero-inner">
    <h1 class="title reveal" id="titleSplit">PsiquÃª Patinhas</h1>
    <p class="subtitle reveal" id="subSplit">Consultoria comportamental com ciÃªncia &amp; carinho</p>
    <div class="price-chip reveal" aria-live="polite">R$ 5,99 por consulta exclusiva</div>
    <div class="cta-row reveal">
      <a class="btn cta-primary magnetic hover-float radial"
         href="https://wa.me/5514996649899?text=Ol%C3%A1!%20Gostaria%20de%20iniciar%20a%20consulta%20comportamental%20da%20Psiqu%C3%AA%20Patinhas."
         target="_blank" aria-label="Iniciar Consulta pelo WhatsApp">Iniciar Consulta</a>
      <a class="btn cta-secondary magnetic" href="#faq" aria-label="Ver perguntas frequentes">DÃºvidas</a>
    </div>
  </div>

  <div class="lottie-corner" aria-hidden="true">
    <lord-icon src="https://cdn.lordicon.com/yqzmiobz.json" trigger="loop" delay="1800" colors="primary:#d6c279,secondary:#d6c279" style="width:44px;height:44px"></lord-icon>
  </div>
</header>

<!-- separador -->
<div class="divider" aria-hidden="true">
  <svg viewBox="0 0 1440 100" preserveAspectRatio="none"><path d="M0,60 C300,120 1140,0 1440,60 L1440,100 L0,100 Z" fill="#121212" opacity=".85"/></svg>
</div>

<!-- A Consulta -->
<section id="consulta" class="section alt">
  <div class="wrap">
    <h2 class="h2 reveal">A Consulta / Como Funciona</h2>
    <p class="lead reveal">Processo simples, humano e eficiente.</p>

    <div class="steps-grid">
      <article class="step reveal tilt magnetic">
        <div class="ord">1) Contato Inicial</div>
        <h3 class="step-title">VocÃª serÃ¡ direcionado a um atendimento exclusivo via WhatsApp, onde um especialista acolhe suas dÃºvidas com total dedicaÃ§Ã£o.</h3>
        <p class="step-text">Atendimento acolhedor e objetivo desde o primeiro contato.</p>
      </article>
      <article class="step reveal tilt magnetic">
        <div class="ord">2) Investimento SimbÃ³lico</div>
        <h3 class="step-title">A consulta custa R$ 5,99, paga de forma rÃ¡pida e segura via PIX. O valor Ã© acessÃ­vel e reflete nosso compromisso em democratizar orientaÃ§Ã£o qualificada.</h3>
        <p class="step-text">Pagamento Ã¡gil e transparente, sem taxas ocultas.</p>
      </article>
      <article class="step reveal tilt magnetic">
        <div class="ord">3) DiagnÃ³stico Personalizado</div>
        <h3 class="step-title">ApÃ³s a confirmaÃ§Ã£o do pagamento, vocÃª recebe orientaÃ§Ã£o precisa, imediata e adaptada ao seu caso, com base em metodologias fundamentadas.</h3>
        <p class="step-text">Diretrizes claras e aplicÃ¡veis Ã  rotina do seu pet.</p>
      </article>
    </div>
  </div>
</section>

<!-- separador -->
<div class="divider" aria-hidden="true">
  <svg viewBox="0 0 1440 100" preserveAspectRatio="none"><path d="M0,60 C300,120 1140,0 1440,60 L1440,100 L0,100 Z" fill="#0e0e0e" opacity=".85"/></svg>
</div>

<!-- Filosofia (com cÃ£o orbitando) -->
<section id="filosofia" class="section">
  <div class="wrap">
    <h2 class="h2 reveal">Nossa Filosofia</h2>

    <!-- Orbita do cachorro (injetamos via JS dimensÃµes) -->
    <div class="dog-orbit" id="dogOrbit" aria-hidden="true" style="display:none">
      <img src="assets/pets/dog.png" alt="">
    </div>

    <div class="philo reveal" id="philoCard">
      <p>â€œNa PsiquÃª Patinhas acreditamos que o comportamento animal vai muito alÃ©m do treinamento. Ã‰ a ponte entre ciÃªncia e emoÃ§Ã£o, entre tÃ©cnica e afeto. Nossa filosofia nasce da convicÃ§Ã£o de que cada pet Ã© um ser Ãºnico, com histÃ³ria, traÃ§os e necessidades prÃ³prias.
      <br><br>Por isso, unimos ciÃªncia de vanguarda com empatia profunda, oferecendo um cuidado que ultrapassa o convencional. Nossa missÃ£o Ã© transformar a relaÃ§Ã£o entre tutores e animais em uma jornada de equilÃ­brio, confianÃ§a e bem-estar.
      <br><br>Aqui, cada consulta Ã© mais que orientaÃ§Ã£o: Ã© um compromisso de excelÃªncia, seriedade e amor pela vida que pulsa em cada patinha.â€</p>
    </div>
  </div>
</section>

<!-- separador -->
<div class="divider" aria-hidden="true">
  <svg viewBox="0 0 1440 100" preserveAspectRatio="none"><path d="M0,60 C300,120 1140,0 1440,60 L1440,100 L0,100 Z" fill="#121212" opacity=".85"/></svg>
</div>

<!-- Metodologia -->
<section id="metodologia" class="section alt">
  <div class="wrap">
    <h2 class="h2 reveal">Metodologia</h2>

    <div class="method reveal" id="method">
      <div class="row">
        <div class="m-item magnetic"><div class="m-ico">ğŸ¾</div><div><strong>AvaliaÃ§Ã£o comportamental breve e objetiva</strong><span class="muted">AnÃ¡lise clara do contexto do pet e da famÃ­lia.</span></div></div>
        <div class="m-item magnetic"><div class="m-ico">ğŸ¦´</div><div><strong>Rotina, ambiente e estÃ­mulos</strong><span class="muted">ObservaÃ§Ã£o das variÃ¡veis que influenciam o comportamento.</span></div></div>
        <div class="m-item magnetic"><div class="m-ico">ğŸ›¡ï¸</div><div><strong>TÃ©cnicas baseadas em evidÃªncias</strong><span class="muted">Abordagens alinhadas Ã  literatura e boas prÃ¡ticas.</span></div></div>
        <div class="m-item magnetic"><div class="m-ico">âœ…</div><div><strong>OrientaÃ§Ãµes prÃ¡ticas e aplicÃ¡veis</strong><span class="muted">Passos objetivos para resultados reais.</span></div></div>
        <div class="m-item magnetic"><div class="m-ico">â¤ï¸</div><div><strong>Ã‰tica, respeito e bem-estar</strong><span class="muted">SeguranÃ§a e humanidade em primeiro lugar.</span></div></div>
      </div>
      <svg class="wave" viewBox="0 0 1200 220" preserveAspectRatio="none" aria-hidden="true">
        <path pathLength="1" d="M40,150 C200,220 380,90 540,120 S880,260 1080,70 Q1140,30 1160,60" />
      </svg>
    </div>

    <!-- Timeline horizontal -->
    <div class="hwrap">
      <div class="hpin" id="hpin">
        <div class="hline" aria-hidden="true"></div>
        <div class="htrack" id="htrack">
          <div class="hstep magnetic"><div class="hs-ico">ğŸ”</div><strong>Escuta & Contexto</strong><div class="muted">Entendemos o histÃ³rico do pet e do tutor.</div></div>
          <div class="hstep magnetic"><div class="hs-ico">ğŸ§­</div><strong>Mapeamento</strong><div class="muted">Rotina, ambiente e estÃ­mulos relevantes.</div></div>
          <div class="hstep magnetic"><div class="hs-ico">ğŸ§ª</div><strong>HipÃ³teses</strong><div class="muted">IntegraÃ§Ã£o com evidÃªncias e boas prÃ¡ticas.</div></div>
          <div class="hstep magnetic"><div class="hs-ico">ğŸ“</div><strong>Plano Claro</strong><div class="muted">AÃ§Ãµes objetivas para hoje.</div></div>
          <div class="hstep magnetic"><div class="hs-ico">âœ¨</div><strong>Ajustes Finos</strong><div class="muted">Revisitas sob demanda.</div></div>
        </div>
      </div>
    </div>

    <!-- Mini-Ã­cones -->
    <div class="icons">
      <div class="icon-card tilt reveal magnetic" aria-label="Acesso Imediato">
        <svg viewBox="0 0 24 24" fill="none"><path d="M13 2L3 14h7l-1 8 12-16h-8l1-4z" stroke="url(#g1)" stroke-width="1.6"/><defs><linearGradient id="g1" x1="0" y1="0" x2="24" y2="24"><stop stop-color="#d6c279"/><stop offset="1" stop-color="#bcae6a"/></linearGradient></defs></svg>
        <div><strong>Acesso Imediato</strong><div class="muted">Sem esperas desnecessÃ¡rias.</div></div>
      </div>
      <div class="icon-card tilt reveal magnetic" aria-label="Cuidado Distinto">
        <svg viewBox="0 0 24 24" fill="none"><path d="M12 21s-6.5-4.2-9-7.7C1 10.6 2.6 7 6.3 7c2 0 3.2 1.1 3.7 2.1.5-1 1.7-2.1 3.7-2.1C17.4 7 19 10.6 21 13.3 18.5 16.8 12 21 12 21z" stroke="url(#g2)" stroke-width="1.6"/><defs><linearGradient id="g2" x1="0" y1="0" x2="24" y2="24"><stop stop-color="#d6c279"/><stop offset="1" stop-color="#bcae6a"/></linearGradient></defs></svg>
        <div><strong>Cuidado Distinto</strong><div class="muted">Um membro da famÃ­lia tratado com respeito.</div></div>
      </div>
      <div class="icon-card tilt reveal magnetic" aria-label="Baseado em CiÃªncia">
        <svg viewBox="0 0 24 24" fill="none"><path d="M12 3l8 3v6c0 5-3.4 7.7-8 9-4.6-1.3-8-4-8-9V6l8-3z" stroke="url(#g3)" stroke-width="1.6"/><defs><linearGradient id="g3" x1="0" y1="0" x2="24" y2="24"><stop stop-color="#d6c279"/><stop offset="1" stop-color="#bcae6a"/></linearGradient></defs></svg>
        <div><strong>Baseado em CiÃªncia</strong><div class="muted">Metodologia comprovada.</div></div>
      </div>
    </div>

    <!-- CTA -->
    <div class="cta-band reveal">
      <div class="row">
        <h3>Pronto para comeÃ§ar? Fale agora com um especialista.</h3>
        <a class="btn cta-primary magnetic radial"
           href="https://wa.me/5514996649899?text=Ol%C3%A1!%20Gostaria%20de%20iniciar%20a%20consulta%20comportamental%20da%20Psiqu%C3%AA%20Patinhas."
           target="_blank" aria-label="Iniciar consulta no WhatsApp">Iniciar Consulta</a>
      </div>
    </div>
  </div>
</section>

<!-- FAQ -->
<section id="faq" class="section">
  <div class="wrap">
    <h2 class="h2 reveal">Perguntas Frequentes</h2>
    <div class="faq">
      <div class="faq-item reveal">
        <div class="faq-q" role="button" aria-expanded="false">Tempo de resposta <span class="plus">ï¼‹</span></div>
        <div class="faq-a" aria-hidden="true"><p>Imediato (pode variar conforme demanda).</p></div>
      </div>
      <div class="faq-item reveal">
        <div class="faq-q" role="button" aria-expanded="false">Temas <span class="plus">ï¼‹</span></div>
        <div class="faq-a" aria-hidden="true"><p>Ansiedade, agressividade, socializaÃ§Ã£o, adaptaÃ§Ã£o, rotina.</p></div>
      </div>
      <div class="faq-item reveal">
        <div class="faq-q" role="button" aria-expanded="false">Acompanhamento <span class="plus">ï¼‹</span></div>
        <div class="faq-a" aria-hidden="true"><p>Podemos orientar prÃ³ximos passos e revisitas, conforme necessidade.</p></div>
      </div>
      <div class="faq-item reveal">
        <div class="faq-q" role="button" aria-expanded="false">Substitui veterinÃ¡rio? <span class="plus">ï¼‹</span></div>
        <div class="faq-a" aria-hidden="true"><p>NÃ£o â€” nosso foco Ã© comportamento. Para questÃµes clÃ­nicas, procure seu veterinÃ¡rio.</p></div>
      </div>
    </div>
  </div>
</section>

<!-- PreÃ§o -->
<section id="preco" class="section alt">
  <div class="wrap">
    <h2 class="h2 reveal">TransparÃªncia &amp; PreÃ§o</h2>
    <table class="table reveal" aria-label="Tabela de transparÃªncia de preÃ§o">
      <thead><tr><th>Item</th><th>DescriÃ§Ã£o</th></tr></thead>
      <tbody>
        <tr><td>Valor fixo</td><td>R$ 5,99 via PIX</td></tr>
        <tr><td>Inclui</td><td>OrientaÃ§Ã£o inicial personalizada.</td></tr>
        <tr><td>NÃ£o inclui</td><td>EmergÃªncias, procedimentos presenciais, laudos clÃ­nicos.</td></tr>
      </tbody>
    </table>
    <div class="note reveal">Tratamos seus dados conforme a LGPD. Usamos somente o necessÃ¡rio para viabilizar o atendimento.</div>
  </div>
</section>

<!-- Footer -->
<footer id="contato">
  <div class="wrap foot">
    <div>
      <h4>PsiquÃª Patinhas</h4>
      <small>Consulta pet com carinho e ciÃªncia.</small>
    </div>
    <div>
      <h4>Contato</h4>
      <small>ğŸ“ <a href="tel:+5514996649899">(14) 99664-9899</a></small><br>
      <small>âœ‰ï¸ <a href="mailto:contato@psiquepatinhas.com">contato@psiquepatinhas.com</a></small><br>
      <small>ğŸ“ Atendimento online</small>
    </div>
    <div>
      <h4>ServiÃ§o</h4>
      <small>Consulta R$ 5,99</small><br>
      <small>OrientaÃ§Ã£o profissional</small><br>
      <small>Atendimento humanizado</small><br>
      <small>Resposta em atÃ© 2h</small><br><br>
      <a class="btn cta-primary magnetic radial"
         href="https://wa.me/5514996649899?text=Ol%C3%A1!%20Gostaria%20de%20iniciar%20a%20consulta%20comportamental%20da%20Psiqu%C3%AA%20Patinhas."
         target="_blank" aria-label="Iniciar consulta (rodapÃ©)">Iniciar Consulta</a>
    </div>
  </div>
  <div class="foot-bottom"><small>Â© 2025 PsiquÃª Patinhas â€” Todos os direitos reservados.</small></div>
</footer>

<!-- Cursor custom -->
<div class="cursor" id="cursor" aria-hidden="true"></div>

<script>
/* ====================== Setup base ====================== */
const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

/* Smooth scroll com Lenis */
const lenis = new Lenis({ lerp: 0.1, smoothWheel: true, wheelMultiplier: 1.05 });
function raf(t){ lenis.raf(t); requestAnimationFrame(raf); }
requestAnimationFrame(raf);
lenis.on('scroll', () => { ScrollTrigger.update(); });

/* Progress + anÃ©is radiais nos CTAs */
const progress = document.getElementById('progress');
const radialTargets = document.querySelectorAll('.radial');
function updateBars(){
  const h = document.documentElement;
  const scrolled = (h.scrollTop)/(h.scrollHeight - h.clientHeight);
  progress.style.width = (scrolled*100).toFixed(3)+'%';
  const deg = (scrolled*360).toFixed(1)+'deg';
  radialTargets.forEach(el => el.style.setProperty('--p', deg));
}
document.addEventListener('scroll', updateBars, {passive:true}); updateBars();

/* Cursor custom */
(() => {
  const cursor = document.getElementById('cursor');
  if(prefersReduced) { cursor.style.display='none'; return; }
  const isTouch = 'ontouchstart' in window || navigator.maxTouchPoints>0;
  if(isTouch){ cursor.style.display='none'; return; }
  window.addEventListener('mousemove',(e)=>{ cursor.style.transform = `translate(${e.clientX}px, ${e.clientY}px)`; },{passive:true});
  const bigger = (on)=> cursor.classList.toggle('big', on);
  ['a','.btn','.magnetic','.nav-link','.icon-card','.step','.m-item','.hstep'].forEach(sel=>{
    document.querySelectorAll(sel).forEach(el=>{
      el.addEventListener('mouseenter',()=>bigger(true));
      el.addEventListener('mouseleave',()=>bigger(false));
    });
  });
})();

/* GSAP base */
gsap.registerPlugin(ScrollTrigger, MotionPathPlugin, ScrollToPlugin, Flip, CustomEase);
CustomEase.create("soft","0.25,0.8,0.25,1");

/* SplitType para o hero */
const splitTitle = new SplitType('#titleSplit', {types:'chars'});
const splitSub = new SplitType('#subSplit', {types:'words'});
gsap.set(splitTitle.chars, {opacity:0, y:40, rotateX:25, transformOrigin:'50% 100%'});
gsap.set(splitSub.words,  {opacity:0, y:18});
gsap.timeline({defaults:{ease:"soft"}})
  .to(splitTitle.chars, {opacity:1, y:0, rotateX:0, stagger:{each:0.02, from:"center"}, duration:1.0}, 0)
  .to(splitSub.words,  {opacity:1, y:0, stagger:0.03, duration:.7}, .15)
  .from('.price-chip', {scale:.9, opacity:0, duration:.5, ease:"back.out(1.8)"}, .35)
  .from('.cta-row .btn', {y:18, opacity:0, stagger:.08, duration:.55}, .45);

/* Reveals globais */
gsap.utils.toArray('.reveal').forEach((el,i)=>{
  gsap.fromTo(el,{y:22,opacity:0},{y:0,opacity:1,duration:.7,delay:(i%5)*0.03,ease:"power2.out",
    scrollTrigger:{trigger:el,start:"top 85%"}})
});

/* Active link na nav */
const ids = ['inicio','consulta','filosofia','metodologia','faq','preco','contato'];
const links = gsap.utils.toArray('.nav-link[href^="#"]');
ids.forEach(id=>{
  ScrollTrigger.create({
    trigger:'#'+id,start:"top center",end:"bottom center",
    onToggle:(self)=>{
      if(self.isActive){
        links.forEach(a=>a.classList.remove('active'));
        const found=document.querySelector('.nav-link[href="#'+id+'"]'); if(found) found.classList.add('active');
      }
    }
  });
});

/* Parallax + ring speed-up */
(() => {
  const media = document.querySelector('.hero-media');
  const paw   = document.querySelector('.layer-paw');
  const ring  = document.querySelector('.layer-ring');
  let mx=0,my=0, tx=0, ty=0, speed=1;
  window.addEventListener('mousemove',(e)=>{ mx=(e.clientX/innerWidth - .5); my=(e.clientY/innerHeight - .5); },{passive:true});
  ScrollTrigger.create({
    trigger: '#inicio', start: 'top top', end: 'bottom top', scrub: true,
    onUpdate: ({getVelocity}) => { speed = Math.min(3, 1 + Math.abs(getVelocity())/1500); ring && (ring.style.animationDuration = (12/speed)+'s'); }
  });
  function loop(){
    tx += (mx - tx)*.06; ty += (my - ty)*.06;
    if(!prefersReduced){
      media.style.transform = `translateY(${window.scrollY*0.12}px)`;
      if(paw){  paw.style.transform  = `translate(${tx*18}px, ${ty*14}px) rotate(${tx*4}deg)`; }
      if(ring){ ring.style.transform = `rotate(0.0001deg) translate(${tx*-16}px, ${ty*-10}px)`; }
    }
    requestAnimationFrame(loop);
  }
  loop();
})();

/* Magnetic + ripple + bursts */
document.querySelectorAll('.magnetic').forEach(el=>{
  const STR=24;
  el.addEventListener('mousemove', (e)=>{
    const r = el.getBoundingClientRect();
    const mx = e.clientX - (r.left + r.width/2);
    const my = e.clientY - (r.top + r.height/2);
    el.style.setProperty('--mx', (mx+r.width/2)+'px');
    el.style.setProperty('--my', (my+r.height/2)+'px');
    el.style.transform = `translate(${mx/STR*6}px, ${my/STR*6}px)`;
  });
  el.addEventListener('mouseleave', ()=>{ el.style.transform=''; });
});
document.querySelectorAll('.btn').forEach(btn=>{
  btn.addEventListener('mousemove',e=>{
    const r=btn.getBoundingClientRect();
    btn.style.setProperty('--mx', (e.clientX - r.left)+'px');
    btn.style.setProperty('--my', (e.clientY - r.top)+'px');
  });
  btn.addEventListener('click', (e)=>{
    if(prefersReduced) return;
    const r = document.createElement('span');
    r.className = 'r';
    const rect = btn.getBoundingClientRect();
    const size = Math.max(rect.width, rect.height);
    r.style.width = r.style.height = size+'px';
    r.style.left = (e.clientX - rect.left - size/2)+'px';
    r.style.top  = (e.clientY - rect.top  - size/2)+'px';
    btn.appendChild(r);
    setTimeout(()=>r.remove(), 600);
    new mojs.Burst({ left: e.pageX, top: e.pageY, radius: {20:80}, count:12,
      children:{shape:'circle', fill:'#d6c279', duration:700, easing:'quad.out'} }).replay();
    anime({targets:btn,scale:[.98,1],duration:320,easing:'easeOutElastic(1,.6)'});
  });
});

/* Metodologia: desenhar linha */
(() => {
  const method = document.getElementById('method');
  ScrollTrigger.create({ trigger: method, start:"top 70%", once:true, onEnter:()=> method.classList.add('draw') });
})();

/* Timeline horizontal pinada */
(() => {
  const pin = document.getElementById('hpin');
  const track = document.getElementById('htrack');
  const steps = gsap.utils.toArray('.hstep');
  function totalX(){ return track.scrollWidth - pin.clientWidth; }
  const st = ScrollTrigger.create({
    trigger: pin, start:"top 20%", end:()=>"+="+(totalX()+320), scrub:0.6, pin:true,
    onUpdate:(self)=> gsap.to(track,{x:-totalX()*self.progress,overwrite:true,duration:0.1,ease:"none"})
  });
  steps.forEach((s,i)=>{
    ScrollTrigger.create({
      trigger: pin, start:()=> "top "+(20+i*5)+"%", end:()=> "bottom "+(80-i*5)+"%", scrub:true,
      onUpdate:(self)=> gsap.to(s,{scale:1+0.04*self.progress, rotate:self.progress*2, duration:.2, overwrite:true})
    });
  });
  addEventListener('resize', ()=>{ st.refresh(); });
})();

/* ===================== FAQ CINEMATOGRÃFICO (FIX COMPLETO) ===================== */
(() => {
  const items = document.querySelectorAll('.faq-item');
  const closeItem = (item) => {
    const a = item.querySelector('.faq-a');
    if(!a) return;
    // mede altura atual e anima para 0
    const h = a.scrollHeight;
    gsap.set(a, {height: h}); // lock para permitir animar
    const tl = gsap.timeline({defaults:{ease:"soft"}});
    tl.to(a, {
      height: 0, opacity: 0, y: -6, filter: "blur(6px)",
      clipPath: "inset(0 0 100% 0)", duration: .6
    })
    .to(item, {borderColor:'#ffffff22', boxShadow:'0 0 0 rgba(0,0,0,0)', duration:.4}, 0);
    item.classList.remove('open');
    const q = item.querySelector('.faq-q');
    if(q){ q.setAttribute('aria-expanded','false'); }
    a.setAttribute('aria-hidden','true');
  };
  const openItem = (item) => {
    const a = item.querySelector('.faq-a');
    if(!a) return;
    // mede altura alvo
    const target = a.scrollHeight;
    const tl = gsap.timeline({defaults:{ease:"soft"}});
    tl.fromTo(a,
      {height: 0, opacity: 0, y: -8, filter: "blur(8px)", clipPath: "inset(0 0 100% 0)"},
      {height: target, opacity: 1, y: 0, filter: "blur(0px)", clipPath: "inset(0 0 0% 0)", duration: .9}
    )
    .to(item, {borderColor:'rgba(214,194,121,.55)', boxShadow:'0 14px 46px rgba(214,194,121,.22)', duration:.6}, 0)
    .add(()=> gsap.set(a,{height:'auto'})); // libera altura apÃ³s animar
    item.classList.add('open');
    const q = item.querySelector('.faq-q');
    if(q){ q.setAttribute('aria-expanded','true'); }
    a.setAttribute('aria-hidden','false');
  };
  items.forEach(item=>{
    const q = item.querySelector('.faq-q');
    const a = item.querySelector('.faq-a');
    if(!q || !a) return;
    q.addEventListener('click', ()=>{
      // fecha os outros primeiro (acordeÃ£o)
      items.forEach(it => { if(it!==item && it.classList.contains('open')) closeItem(it); });
      // toggle deste
      item.classList.contains('open') ? closeItem(item) : openItem(item);
    });
  });
})();

/* ====== PREÃ‡O: ANIMAÃ‡ÃƒO â€œJANELAâ€ AO ENTRAR ====== */
(() => {
  const table = document.querySelector('#preco .table');
  const note  = document.querySelector('#preco .note');
  if(!table) return;
  const tl = gsap.timeline({
    scrollTrigger:{
      trigger: table, start:"top 80%", once:true
    }, defaults:{ease:"soft"}
  });
  tl.to(table, {
    opacity:1, y:0, scale:1, duration:1.0,
    clipPath: `inset(0% 0% 0% 0% round 16px)`,
    boxShadow:'0 28px 120px rgba(214,194,121,.18)'
  })
  .add(()=> table.classList.add('enter')), // dispara sweep highlight
  tl.to(note, {opacity:1, y:0, duration:.7}, "-=0.4");
})();

/* Paw Trail: partÃ­culas 2D (emoji) no cursor */
(() => {
  if(prefersReduced) return;
  const cvs = document.getElementById('pawTrail');
  const ctx = cvs.getContext('2d');
  function resize(){ cvs.width = innerWidth; cvs.height = innerHeight; }
  addEventListener('resize', resize); resize();
  let particles = []; let last = 0; let mx=0,my=0;
  addEventListener('mousemove', e => { mx=e.clientX; my=e.clientY; spawn(3); }, {passive:true});
  function spawn(n=2){
    for(let i=0;i<n;i++){
      particles.push({x:mx+(Math.random()-0.5)*12, y:my+(Math.random()-0.5)*12, a:1, vy:-0.6-Math.random()*0.6, vx:(Math.random()-0.5)*0.6, s:18+Math.random()*8, r: (Math.random()*20-10)});
    }
  }
  function loop(ts){
    const dt = Math.min(32, ts-last); last=ts;
    ctx.clearRect(0,0,cvs.width,cvs.height);
    particles.forEach(p=>{
      p.x += p.vx*dt*0.06; p.y += p.vy*dt*0.06; p.a -= 0.008; p.r += 0.5;
      ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.r*Math.PI/180);
      ctx.globalAlpha = Math.max(0,p.a);
      ctx.font = `${p.s}px serif`; ctx.fillText('ğŸ¾', 0, 0);
      ctx.restore();
    });
    particles = particles.filter(p=>p.a>0);
    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);
})();

/* tsParticles â€“ camada sutil de partÃ­culas ğŸ¾ no HERO */
tsParticles.load({
  id: "tpaw",
  options: {
    fullScreen: { enable:false },
    background: { color: "transparent" },
    particles:{
      number:{value:14}, move:{enable:true,speed:0.7, direction:"none", outModes:{default:"bounce"}},
      shape:{ type:"char", character:{ value:["ğŸ¾"], style:"", weight:"400"} },
      size:{ value:16, random:{enable:true, minimumValue:10}},
      opacity:{value:.25}, color:{value:"#d6c279"}
    }
  }
});

/* CÃƒO ORBITANDO A FILOSOFIA â€” bursts periÃ³dicos */
(() => {
  const wrap = document.querySelector('#filosofia .wrap');
  const card = document.getElementById('philoCard');
  const orbit = document.getElementById('dogOrbit');
  if(!wrap || !card || !orbit) return;
  function placeOrbit(){
    const wr = wrap.getBoundingClientRect();
    const r = card.getBoundingClientRect();
    const pad = 140;
    orbit.style.display='block';
    orbit.style.width  = (r.width + pad)+'px';
    orbit.style.height = (r.height + pad)+'px';
    orbit.style.left   = (r.left - wr.left - pad/2)+'px';
    orbit.style.top    = (r.top - wr.top - pad/2)+'px';
  }
  placeOrbit(); addEventListener('resize', placeOrbit);
  let lastBurst = performance.now();
  function bursts(ts){
    if(ts - lastBurst > 2000){
      lastBurst = ts;
      const rect = orbit.getBoundingClientRect();
      const cx = rect.left + rect.width/2;
      const cy = rect.top + 10;
      new mojs.Burst({
        left: cx, top: cy, radius: {10:60}, count:8,
        children:{shape:'circle', fill:'#d6c279', opacity:{1:0}, duration:900}
      }).replay();
    }
    requestAnimationFrame(bursts);
  }
  requestAnimationFrame(bursts);
})();
</script>

<!-- ============== THREE.JS PESADO (com pÃ³s-processamento) â€” EM MÃ“DULO ============== -->
<script type="module">
import { EffectComposer }   from "https://unpkg.com/three@0.152.2/examples/jsm/postprocessing/EffectComposer.js";
import { RenderPass }       from "https://unpkg.com/three@0.152.2/examples/jsm/postprocessing/RenderPass.js";
import { UnrealBloomPass }  from "https://unpkg.com/three@0.152.2/examples/jsm/postprocessing/UnrealBloomPass.js";
import { ShaderPass }       from "https://unpkg.com/three@0.152.2/examples/jsm/postprocessing/ShaderPass.js";
import { FXAAShader }       from "https://unpkg.com/three@0.152.2/examples/jsm/shaders/FXAAShader.js";
import { RGBShiftShader }   from "https://unpkg.com/three@0.152.2/examples/jsm/shaders/RGBShiftShader.js";
import { VignetteShader }   from "https://unpkg.com/three@0.152.2/examples/jsm/shaders/VignetteShader.js";

const canvas = document.getElementById('bg3d');
const scene  = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(55, innerWidth/innerHeight, 0.1, 2000);
camera.position.set(0, 6, 38);

const renderer = new THREE.WebGLRenderer({canvas, antialias:true, alpha:true});
renderer.setPixelRatio(Math.min(devicePixelRatio,2));
renderer.setSize(innerWidth, innerHeight);
renderer.outputEncoding = THREE.sRGBEncoding;
renderer.toneMapping = THREE.ACESFilmicToneMapping;
renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFSoftShadowMap;

/* Luzes dramÃ¡ticas */
scene.add(new THREE.AmbientLight(0xffffff, .25));
const dir = new THREE.DirectionalLight(0xffffff, 1.15);
dir.position.set(6, 12, 12); dir.castShadow = true; scene.add(dir);
const spot = new THREE.SpotLight(0xfff2c4, 2, 200, Math.PI/5, .2, .8);
spot.position.set(-18, 18, 8); scene.add(spot);

/* PartÃ­culas 3D douradas */
function circleTexture(size=64){
  const c=document.createElement('canvas'); c.width=c.height=size;
  const ctx=c.getContext('2d'); const g=ctx.createRadialGradient(size/2,size/2,0,size/2,size/2,size/2);
  g.addColorStop(0,'rgba(214,194,121,1)'); g.addColorStop(.4,'rgba(214,194,121,.82)'); g.addColorStop(1,'rgba(214,194,121,0)');
  ctx.fillStyle=g; ctx.fillRect(0,0,size,size); const t=new THREE.Texture(c); t.needsUpdate=true; return t;
}
const COUNT = 2200;
const geom = new THREE.BufferGeometry();
const pos  = new Float32Array(COUNT*3);
const spd  = new Float32Array(COUNT);
for(let i=0;i<COUNT;i++){
  pos[i*3+0] = (Math.random()-0.5)*120;
  pos[i*3+1] = (Math.random()-0.5)*70;
  pos[i*3+2] = (Math.random()-0.5)*60;
  spd[i] = 0.2 + Math.random()*0.8;
}
geom.setAttribute('position', new THREE.BufferAttribute(pos,3));
const mat = new THREE.PointsMaterial({size:1.75,map:circleTexture(),transparent:true,depthWrite:false,blending:THREE.AdditiveBlending,color:0xd6c279,opacity:.95});
const points = new THREE.Points(geom, mat); scene.add(points);

/* Objeto PBR (torusKnot) */
const knot = new THREE.Mesh(
  new THREE.TorusKnotGeometry(4.2, 1.1, 200, 32),
  new THREE.MeshPhysicalMaterial({color:0xd6c279, metalness:.9, roughness:.25, reflectivity:.8, clearcoat:.7, clearcoatRoughness:.15})
);
knot.position.set(0,2,-8); knot.castShadow=true; scene.add(knot);

/* Fita dourada (tube) */
const curve = new THREE.CatmullRomCurve3([...Array(14)].map((_,i)=>new THREE.Vector3(i*8-50, Math.sin(i)*10, Math.cos(i*.7)*6)));
const tube = new THREE.TubeGeometry(curve, 160, .35, 8, false);
const tMat = new THREE.MeshBasicMaterial({color:0xd6c279, transparent:true, opacity:.45});
const ribbon = new THREE.Mesh(tube, tMat);
ribbon.position.z = -10; scene.add(ribbon);

/* PÃ³s-processamento */
const composer = new EffectComposer(renderer);
composer.addPass(new RenderPass(scene,camera));
const fxaa = new ShaderPass(FXAAShader);
fxaa.uniforms['resolution'].value.set(1/innerWidth, 1/innerHeight); composer.addPass(fxaa);
const bloom = new UnrealBloomPass(new THREE.Vector2(innerWidth,innerHeight), 0.95, 0.6, 0.85); composer.addPass(bloom);
const rgbShift = new ShaderPass(RGBShiftShader); rgbShift.uniforms.amount.value=0.0009; composer.addPass(rgbShift);
const vignette = new ShaderPass(VignetteShader); vignette.uniforms.offset.value=1.0; vignette.uniforms.darkness.value=1.25; composer.addPass(vignette);

/* Resize */
addEventListener('resize',()=>{ 
  renderer.setSize(innerWidth,innerHeight); 
  camera.aspect=innerWidth/innerHeight; camera.updateProjectionMatrix();
  composer.setSize(innerWidth,innerHeight); fxaa.uniforms['resolution'].value.set(1/innerWidth,1/innerHeight);
});

/* InteraÃ§Ãµes */
let mx=0,my=0, tx=0, ty=0, scrollBoost=0;
addEventListener('mousemove',e=>{ mx=(e.clientX/innerWidth-.5); my=(e.clientY/innerHeight-.5); },{passive:true});
addEventListener('scroll', ()=>{ scrollBoost = Math.min(3, scrollBoost+0.18); }, {passive:true});

function animate(){
  tx += (mx - tx)*.04; ty += (my - ty)*.04;
  const a = geom.attributes.position.array;
  const t = performance.now()*0.001;
  for(let i=0;i<COUNT;i++){
    const ix=i*3;
    a[ix+1] += (Math.sin(t*spd[i] + a[ix]*.03)*.02) + scrollBoost*.012;
    a[ix+0] += Math.cos(t*spd[i] + a[ix+2]*.02)*.006;
    a[ix+2] += Math.sin(t*spd[i] + a[ix+1]*.02)*.004;
  }
  geom.attributes.position.needsUpdate = true;
  scrollBoost *= .92;
  knot.rotation.x += 0.003; knot.rotation.y -= 0.004;
  points.rotation.y += 0.0009; points.rotation.x += 0.0003;
  ribbon.rotation.y -= 0.0006;
  camera.position.x += (tx*5 - camera.position.x)*.06;
  camera.position.y += (-ty*2 - camera.position.y)*.06;
  composer.render();
  requestAnimationFrame(animate);
}
requestAnimationFrame(animate);
</script>
</body>
</html>
